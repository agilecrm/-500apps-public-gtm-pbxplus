___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG", 
  "categories": [
    "MARKETING"
  ],
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Pbxplus by 500apps",
  "brand": {
    "id": "github.com_agilecrm",
    "displayName": "agilecrm",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "Pbxplus enables you to build powerful and interactive forms which help in gathering data for research insight.\nhttps://infinity.500apps.com/Pbxplus",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "api_key",
    "displayName": "Pbxplus Key",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "help": "Please copy the Pbxplus from App -\u003eCreate a form -\u003e Embed. https://infinity.500apps.com/pbxplus"
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const log = require('logToConsole');
const injectScript = require('injectScript');
const encodeUriComponent = require('encodeUriComponent');
const api_key = encodeUriComponent(data.api_key+'-'+data.element_id);
const trackingUrl='https://gtm.500apps.com/gtm/forms/'+api_key+'.js';
log('data = verify', trackingUrl);
injectScript(trackingUrl,data.gtmOnSuccess,data.gtmOnFailure);
// Call data.gtmOnSuccess when the tag is finished.
data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://gtm.500apps.com/gtm/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Test case 1
  code: |-
    const mockData = {
      // Mocked field values
      form_key:"ZGV2LTI4MTQtMTE5Ni0xMTEz",
      element_id:"id"
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();


___NOTES___

Created on 7/22/2021, 4:35:06 PM


